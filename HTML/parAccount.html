<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>Index - Gp Bootstrap Template</title>
  <meta name="description" content="">
  <meta name="keywords" content="">


  <link href="assets/img/favicon.png" rel="icon">
  <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">


  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Raleway:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
    rel="stylesheet">


  <link href="../assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="../assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="../assets/vendor/aos/aos.css" rel="stylesheet">
  <link href="../assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">
  <link href="../assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link rel="stylesheet" href="../assets/css/parProfile.css">

  <!-- <link href="../assets/css/main.css" rel="stylesheet"> -->

  <style>
    body {
      font-family: 'Roboto', sans-serif;
      background-color: #f8f9fa;
      color: #343a40;
      background-image: url(../assets/img/bg.png);
      padding: 3vh;
      margin: 0;
    }

    h2 {
      margin-top: 2vh;
      margin-bottom: 2vh;
      text-align: center;
    }

    form {
      max-width: 20vw;
      margin: 0 auto;
      background: transparent;
      padding: 2vh;
      border-radius: 1vh;
      box-shadow: 0 1vh 2vh rgba(0, 0, 0, 0.1);
    }

    label {
      font-weight: bold;
      color: #ffc451;
    }

    input[type="text"],
    input[type="number"],
    input[type="password"] {
      width: 100%;
      padding: 1vh;
      margin: 1vh 0;
      border: 0.2vh solid #ced4da;
      border-radius: 5px;
    }

    button {
      background-color: #ffc451;
      color: white;
      border: none;
      padding: 1vh 1.5vh;
      border-radius: 1vh;
      cursor: pointer;   
      background-color: transparent;
      border: 0.2vh solid #ced4da;
      transition: background-color 0.3s ease;
    }

    button:hover {
      background-color: rgb(240, 174, 51);
    }
    #headline{
      font-family: 'Roboto', sans-serif;
      font-size: 10.5vh;
      color: #ffc451;
    }

    .showpass{
      display: flex;
      /* align-items: center;
      justify-content: center; */
      padding: 1vh;
      margin-top:0.1vh; 
      gap: 2vh;
    }

    #check{
      scale: 1.5;
    }

    #backBtn {
      background-color: transparent;
      border: none;
      color: white;
      font-size: 2.5vh;
      cursor: pointer;
      border: 0.2vh solid #ced4da;
      transition: background-color 0.3s ease;
      position: absolute;
    }
    #backBtn:hover {
      background-color: rgb(240, 174, 51);
    }
    a{
      text-decoration: none;
      color: white;
    }

  </style>

</head>

<body>

  <button id="backBtn" onclick="goBack()">Back</button>
  <h2 id="headline">My Account</h2>
  <form id="profileForm">
      <label>First Name:</label>
      <input type="text" id="firstName"><br>

      <label>Last Name:</label>
      <input type="text" id="lastName"><br>

      <label>Email:</label>
      <input type="text" id="email"><br>

      <label>Phone:</label>
      <input type="number" id="phone"><br>
      
      <label>Password:</label>
      <input type="password" id="password"><br>

      <div class="showpass">
        <input type="checkbox" id="check" onclick="togglePassword('password')"> 
        <h4 style="color:#ffc451; font-size: 2.5vh; position: relative; top:0.7vh;">Show Password</h4>
      </div>
      

      <button type="submit">Update</button>
      <button id="logoutBtn">Logout</button>
  </form>
  <!-- Logout Button -->
  
</body>
<script>
          function togglePassword(id) {
            const input = document.getElementById(id);
            input.type = input.type === "password" ? "text" : "password";
        }
  // Fetch user info
  fetch("/api/user")
    .then(res => res.json())
    .then(data => {
        document.getElementById("firstName").value = data.firstname;
        document.getElementById("lastName").value = data.lastname;
        document.getElementById("email").value = data.email;
        document.getElementById("phone").value = data.phone;
        });

// Update user info
document.getElementById("profileForm").addEventListener("submit", async (e) => {
  e.preventDefault();

  const updated = {
    firstname: document.getElementById("firstName").value,
    lastname: document.getElementById("lastName").value,
    email: document.getElementById("email").value,
    phone: document.getElementById("phone").value,
    password: document.getElementById("password").value
  };

  await fetch("/api/update-user", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(updated)
  });

  alert("Profile updated!");
});

document.getElementById("logoutBtn").addEventListener("click", async () => {
      const res = await fetch("/api/logout", {
        method: "POST"
      });

      const data = await res.json();
      if (data.success) {
        //alert("Logged out successfully!");
        window.location.href = "login.html"; // redirect to login page
      }
    });

    function goBack() {
    history.back(); // goes back to the previous page
    // or use history.go(-1);
    }
</script>

<!-- <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="assets/vendor/php-email-form/validate.js"></script>
<script src="assets/vendor/aos/aos.js"></script>
<script src="assets/vendor/swiper/swiper-bundle.min.js"></script>
<script src="assets/vendor/glightbox/js/glightbox.min.js"></script>
<script src="assets/vendor/imagesloaded/imagesloaded.pkgd.min.js"></script>
<script src="assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
<script src="assets/vendor/purecounter/purecounter_vanilla.js"></script>

<script>
  const chatbotHeader = document.getElementById('chatbot-header');
  const chatbotBody = document.getElementById('chatbot-body');
  const chatbotInput = document.getElementById('chatbot-input');
  const chatbotMessages = document.getElementById('chatbot-messages');

  chatbotHeader.addEventListener('click', () => {
    chatbotBody.style.display = chatbotBody.style.display === 'flex' ? 'none' : 'flex';
  });

  chatbotInput.addEventListener('keypress', function (e) {
    if (e.key === 'Enter' && this.value.trim() !== '') {
      const userMsg = document.createElement('div');
      userMsg.classList.add('chatbot-message', 'user');
      userMsg.innerText = this.value;
      chatbotMessages.appendChild(userMsg);

      // Bot response
      const botMsg = document.createElement('div');
      botMsg.classList.add('chatbot-message', 'bot');
      botMsg.innerText = "Hello! How can I help you?"; // Replace with real bot logic
      chatbotMessages.appendChild(botMsg);

      chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
      this.value = '';
    }
  });
</script>
<script>
  const eventSearch = document.getElementById('eventSearch');
  const eventCards = document.querySelectorAll('.event-card');

  eventSearch.addEventListener('input', function () {
    const query = this.value.toLowerCase();

    eventCards.forEach(card => {
      const title = card.querySelector('h3 a').innerText.toLowerCase();
      if (title.includes(query)) {
        card.style.display = ''; // reset to default (grid item)
      } else {
        card.style.display = 'none'; // hide the card
      }
    });
  });

</script>

<script src="assets/js/main.js"></script> -->

</html>